"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[8014],{3147:function(e){e.exports=function(){function e(e){var a=[];return e.AMapUI&&a.push(o(e.AMapUI)),e.Loca&&a.push(n(e.Loca)),Promise.all(a)}function o(e){return new Promise(function(o,n){var t=[];if(e.plugins)for(var s=0;s<e.plugins.length;s+=1)-1==r.AMapUI.plugins.indexOf(e.plugins[s])&&t.push(e.plugins[s]);if(i.AMapUI===a.failed)n("\u524d\u6b21\u8bf7\u6c42 AMapUI \u5931\u8d25");else if(i.AMapUI===a.notload){i.AMapUI=a.loading,r.AMapUI.version=e.version||r.AMapUI.version,s=r.AMapUI.version;var u=document.body||document.head,c=document.createElement("script");c.type="text/javascript",c.src="https://webapi.amap.com/ui/"+s+"/main.js",c.onerror=function(e){i.AMapUI=a.failed,n("\u8bf7\u6c42 AMapUI \u5931\u8d25")},c.onload=function(){if(i.AMapUI=a.loaded,t.length)window.AMapUI.loadUI(t,function(){for(var e=0,n=t.length;e<n;e++){var a=t[e].split("/").slice(-1)[0];window.AMapUI[a]=arguments[e]}for(o();l.AMapUI.length;)l.AMapUI.splice(0,1)[0]()});else for(o();l.AMapUI.length;)l.AMapUI.splice(0,1)[0]()},u.appendChild(c)}else i.AMapUI===a.loaded?e.version&&e.version!==r.AMapUI.version?n("\u4e0d\u5141\u8bb8\u591a\u4e2a\u7248\u672c AMapUI \u6df7\u7528"):t.length?window.AMapUI.loadUI(t,function(){for(var e=0,n=t.length;e<n;e++){var a=t[e].split("/").slice(-1)[0];window.AMapUI[a]=arguments[e]}o()}):o():e.version&&e.version!==r.AMapUI.version?n("\u4e0d\u5141\u8bb8\u591a\u4e2a\u7248\u672c AMapUI \u6df7\u7528"):l.AMapUI.push(function(e){e?n(e):t.length?window.AMapUI.loadUI(t,function(){for(var e=0,n=t.length;e<n;e++){var a=t[e].split("/").slice(-1)[0];window.AMapUI[a]=arguments[e]}o()}):o()})})}function n(e){return new Promise(function(o,n){if(i.Loca===a.failed)n("\u524d\u6b21\u8bf7\u6c42 Loca \u5931\u8d25");else if(i.Loca===a.notload){i.Loca=a.loading,r.Loca.version=e.version||r.Loca.version;var t=r.Loca.version,s=r.AMap.version.startsWith("2"),u=t.startsWith("2");if(s&&!u||!s&&u)n("JSAPI \u4e0e Loca \u7248\u672c\u4e0d\u5bf9\u5e94\uff01\uff01");else{s=r.key,u=document.body||document.head;var c=document.createElement("script");c.type="text/javascript",c.src="https://webapi.amap.com/loca?v="+t+"&key="+s,c.onerror=function(e){i.Loca=a.failed,n("\u8bf7\u6c42 AMapUI \u5931\u8d25")},c.onload=function(){for(i.Loca=a.loaded,o();l.Loca.length;)l.Loca.splice(0,1)[0]()},u.appendChild(c)}}else i.Loca===a.loaded?e.version&&e.version!==r.Loca.version?n("\u4e0d\u5141\u8bb8\u591a\u4e2a\u7248\u672c Loca \u6df7\u7528"):o():e.version&&e.version!==r.Loca.version?n("\u4e0d\u5141\u8bb8\u591a\u4e2a\u7248\u672c Loca \u6df7\u7528"):l.Loca.push(function(e){e?n(e):n()})})}if(!window)throw Error("AMap JSAPI can only be used in Browser.");var a,t;(t=a||(a={})).notload="notload",t.loading="loading",t.loaded="loaded",t.failed="failed";var r={key:"",AMap:{version:"1.4.15",plugins:[]},AMapUI:{version:"1.1",plugins:[]},Loca:{version:"1.3.2"}},i={AMap:a.notload,AMapUI:a.notload,Loca:a.notload},l={AMap:[],AMapUI:[],Loca:[]},s=[],u=function(e){"function"==typeof e&&(i.AMap===a.loaded?e(window.AMap):s.push(e))};return{load:function(o){return new Promise(function(n,t){if(i.AMap==a.failed)t("");else if(i.AMap==a.notload){var l=o.key,c=o.version,p=o.plugins;l?(window.AMap&&"lbs.amap.com"!==location.host&&t("\u7981\u6b62\u591a\u79cdAPI\u52a0\u8f7d\u65b9\u5f0f\u6df7\u7528"),r.key=l,r.AMap.version=c||r.AMap.version,r.AMap.plugins=p||r.AMap.plugins,i.AMap=a.loading,c=document.body||document.head,window.___onAPILoaded=function(r){if(delete window.___onAPILoaded,r)i.AMap=a.failed,t(r);else for(i.AMap=a.loaded,e(o).then(function(){n(window.AMap)}).catch(t);s.length;)s.splice(0,1)[0]()},(p=document.createElement("script")).type="text/javascript",p.src="https://webapi.amap.com/maps?callback=___onAPILoaded&v="+r.AMap.version+"&key="+l+"&plugin="+r.AMap.plugins.join(","),p.onerror=function(e){i.AMap=a.failed,t(e)},c.appendChild(p)):t("\u8bf7\u586b\u5199key")}else if(i.AMap==a.loaded)if(o.key&&o.key!==r.key)t("\u591a\u4e2a\u4e0d\u4e00\u81f4\u7684 key");else if(o.version&&o.version!==r.AMap.version)t("\u4e0d\u5141\u8bb8\u591a\u4e2a\u7248\u672c JSAPI \u6df7\u7528");else{if(l=[],o.plugins)for(c=0;c<o.plugins.length;c+=1)-1==r.AMap.plugins.indexOf(o.plugins[c])&&l.push(o.plugins[c]);l.length?window.AMap.plugin(l,function(){e(o).then(function(){n(window.AMap)}).catch(t)}):e(o).then(function(){n(window.AMap)}).catch(t)}else if(o.key&&o.key!==r.key)t("\u591a\u4e2a\u4e0d\u4e00\u81f4\u7684 key");else if(o.version&&o.version!==r.AMap.version)t("\u4e0d\u5141\u8bb8\u591a\u4e2a\u7248\u672c JSAPI \u6df7\u7528");else{var d=[];if(o.plugins)for(c=0;c<o.plugins.length;c+=1)-1==r.AMap.plugins.indexOf(o.plugins[c])&&d.push(o.plugins[c]);u(function(){d.length?window.AMap.plugin(d,function(){e(o).then(function(){n(window.AMap)}).catch(t)}):e(o).then(function(){n(window.AMap)}).catch(t)})}})},reset:function(){delete window.AMap,delete window.AMapUI,delete window.Loca,r={key:"",AMap:{version:"1.4.15",plugins:[]},AMapUI:{version:"1.1",plugins:[]},Loca:{version:"1.3.2"}},i={AMap:a.notload,AMapUI:a.notload,Loca:a.notload},l={AMap:[],AMapUI:[],Loca:[]}}}}()},8014:(e,o,n)=>{n.r(o),n.d(o,{APILoader:()=>s,AutoComplete:()=>h,BezierCurve:()=>S,Circle:()=>O,CircleMarker:()=>D,Context:()=>w,ContextMenu:()=>N,ControlBarControl:()=>W,Ellipse:()=>G,Geolocation:()=>J,HawkEyeControl:()=>V,InfoWindow:()=>X,LabelMarker:()=>pe,Map:()=>I,MapTypeControl:()=>ne,Marker:()=>se,MassMarks:()=>fe,MouseTool:()=>Se,MouseToolDrawType:()=>Le,PolyEditor:()=>Ie,Polygon:()=>Ce,PolygonContext:()=>he,PolygonEditor:()=>Ee,Polyline:()=>ke,PolylineContext:()=>be,PolylineEditor:()=>Te,Provider:()=>k,Rectangle:()=>Oe,ScaleControl:()=>ze,Text:()=>je,TileLayer:()=>re,TileLayerType:()=>te,ToolBarControl:()=>Ze,Weather:()=>Ge,initialState:()=>C,reducer:()=>E,requireCss:()=>Ue,requireScript:()=>De,useAutoComplete:()=>m,useBezierCurve:()=>L,useCircle:()=>R,useCircleMarker:()=>U,useContextMenu:()=>z,useControlBarControl:()=>j,useEllipse:()=>_,useEventProperties:()=>M,useGeolocation:()=>Y,useHawkEyeControl:()=>q,useInfoWindow:()=>Q,useMap:()=>y,useMapContext:()=>g,useMapTypeControl:()=>oe,useMarker:()=>le,useMassMarks:()=>ve,usePolygon:()=>me,usePolyline:()=>ye,usePortal:()=>p,usePrevious:()=>f,useRectangle:()=>Re,useScaleControl:()=>He,useSetStatus:()=>d,useSettingProperties:()=>A,useText:()=>Ne,useTileLayer:()=>ae,useToolBarControl:()=>We,useVisiable:()=>v,useWeather:()=>_e});var a=n(9257),t=n(7804),r=n(3147),i=n(9424),l=["children"],s=e=>{var{children:o}=e,n=(0,a.A)(e,l),[s,u]=(0,t.useState)(!1),[c,p]=(0,t.useState)();return(0,t.useEffect)(()=>{var e=n.akey||"",o=n.plugins;(0,r.load)({key:e,plugins:o,version:n.version||"2.0",AMapUI:n.AMapUI,Loca:n.Loca}).then(()=>{p(void 0),u(!0)}).catch(e=>{p(e)})},[n.akey]),c?(0,i.jsx)("div",{style:{color:"red"},children:c.message}):s?(0,i.jsx)(t.Fragment,{children:o}):null},u=n(8102),c=n(4689),p=()=>{var[e]=(0,t.useState)(()=>document.createElement("div"));return{Portal:(0,t.useCallback)(function(o){var{children:n}=o;return n?(0,c.createPortal)(n,e):null},[e]),container:e}};function d(e,o,n){void 0===o&&(o={}),void 0===n&&(n=[]),n.forEach(n=>{var a=n,[r,i]=(0,t.useState)(o[a]);(0,t.useEffect)(()=>{if(e&&void 0!==o[a]&&o[a]!==r){var n=e.getStatus();e.setStatus((0,u.A)({},n,{[a]:o[a]})),i(o[a])}},[e,o[a]])})}function v(e,o){var[n,a]=(0,t.useState)(o);(0,t.useEffect)(()=>{e&&void 0!==o&&(o?e.show&&e.show():e.hide&&e.hide(),o!==n&&a(o))},[e,o])}function f(e){var o=(0,t.useRef)();return(0,t.useEffect)(()=>{o.current=e}),o.current}function M(e,o,n,a){void 0===o&&(o={}),void 0===n&&(n=[]),n.forEach(n=>{var a=o[n];(0,t.useEffect)(()=>{if(e){var o=n.toLocaleLowerCase().replace(/^on/,"");return a&&o&&e.on(o,a),()=>{o&&a&&e.off(o,a)}}},[e,a])})}function A(e,o,n){void 0===e&&(e={}),void 0===o&&(o={}),void 0===n&&(n=[]),n.forEach(n=>{var a="set"+n,r=""+n.charAt(0).toLowerCase()+n.slice(1),i=o[r],[l,s]=(0,t.useState)(i);(0,t.useEffect)(()=>{e&&void 0!==i&&i!==l&&e[a]&&"function"===typeof e[a]&&(e[a](i),s(i))},[e,i])})}var m=function(e){void 0===e&&(e={});var[o,n]=(0,t.useState)();return(0,t.useEffect)(()=>{var a;if(AMap&&!o)return AMap.v?AMap.plugin(["AMap.Autocomplete"],()=>{a=new AMap.Autocomplete(e),n(a)}):AMap.plugin(["AMap.AutoComplete"],()=>{a=new AMap.AutoComplete(e),n(a)}),()=>{a&&n(void 0)}},[]),A(o,e,["Type","City","CityLimit"]),M(o,e,["onChoose","onSelect"]),{autoComplete:o,setAutoComplete:n}},h=t.forwardRef((e,o)=>{var{autoComplete:n}=m(e);return(0,t.useImperativeHandle)(o,()=>(0,u.A)({},e,{autoComplete:n})),null});var C={map:void 0,AMap:void 0,container:void 0},E=(e,o)=>(0,u.A)({},e,o),w=t.createContext({state:C,dispatch:()=>null});function g(){var{state:e,dispatch:o}=(0,t.useContext)(w);return(0,u.A)({},e,{state:e,dispatch:o})}var y=function(e){void 0===e&&(e={});var o=(0,u.A)({},(function(e){if(null==e)throw new TypeError("Cannot destructure "+e)}(e),e)),[n,a]=(0,t.useState)(),[r,i]=(0,t.useState)(e.zoom||15),[l,s]=(0,t.useState)(e.container),{dispatch:c}=(0,t.useContext)(w);return(0,t.useEffect)(()=>{if(l&&!n&&AMap){l.className=l.className+" react-amap-wapper";var e=new AMap.Map(l,(0,u.A)({zoom:r},o));a(e)}return()=>{n&&(n.clearInfoWindow(),n.clearLimitBounds(),n.clearMap(),n.destroy(),a(void 0))}},[l,n]),(0,t.useEffect)(()=>(n&&l&&c({map:n,container:l,AMap:AMap}),()=>{c({map:void 0,container:void 0,AMap:void 0})}),[n,l]),(0,t.useMemo)(()=>{n&&"number"===typeof e.zoom&&r!==e.zoom&&e.zoom>=2&&e.zoom<=20&&(i(e.zoom),n.setZoom(e.zoom))},[r,e.zoom]),(0,t.useMemo)(()=>{e.center&&n&&n.setCenter(e.center)},[n,e.center]),d(n,e,["dragEnable","zoomEnable","jogEnable","pitchEnable","rotateEnable","animateEnable","keyboardEnable"]),A(n,e,["Zoom","LabelzIndex","Layers","City","Bounds","LimitBounds","Lang","Rotation","DefaultCursor","MapStyle","Features","DefaultLayer","Pitch"]),M(n,e,["onMouseMove","onZoomChange","onMapMove","onMouseWheel","onZoomStart","onMouseOver","onMouseOut","onDblClick","onClick","onZoomEnd","onMoveEnd","onMouseUp","onMouseDown","onRightClick","onMoveStart","onDragStart","onDragging","onDragEnd","onHotspotOut","onHotspotOver","onTouchStart","onComplete","onHotspotClick","onTouchMove","onTouchEnd","onResize"]),{map:n,setMap:a,zoom:r,setZoom:i,container:l,setContainer:s}},b=["className","children"],k=e=>{var[o,n]=(0,t.useReducer)(E,C);return(0,i.jsx)(w.Provider,{value:(0,u.A)({},o,{state:o,dispatch:n}),children:e.children})},I=(0,t.forwardRef)((e,o)=>{var{className:n,children:r}=e,l=(0,a.A)(e,b),s=window.AMap,[c,p]=(0,t.useReducer)(E,C),d=(0,t.useRef)(null),{setContainer:v,container:f,map:M}=y((0,u.A)({container:l.container||d.current},l));return(0,t.useEffect)(()=>v(d.current),[d.current]),(0,t.useImperativeHandle)(o,()=>(0,u.A)({},l,{map:M,AMap:s,container:l.container||d.current}),[M]),(0,t.useEffect)(()=>{M&&p({map:M,container:d.current,AMap:s})},[M]),(0,i.jsxs)(w.Provider,{value:(0,u.A)({},c,{state:c,dispatch:p}),children:[!l.container&&(0,i.jsx)("div",{ref:d,className:n,style:(0,u.A)({fontSize:1,width:"100%",height:"100%"},l.style)}),s&&M&&"function"===typeof r&&r({AMap:s,map:M,container:f}),s&&M&&"function"!==typeof r&&r]})}),T=["visiable","visible"],L=function(e){void 0===e&&(e={});var{visiable:o,visible:n}=e,r=(0,a.A)(e,T),{map:i}=g(),[l,s]=(0,t.useState)();return(0,t.useEffect)(()=>{if(AMap&&i&&!l){var e=new AMap.BezierCurve((0,u.A)({},r));return i.add(e),s(e),()=>{e&&(AMap.v?i&&i.remove(e):i&&i.removeLayer(e),s(void 0))}}},[i]),v(l,null!=n?n:o),A(l,e,["Options","Path","ExtData","ExtData"]),M(l,e,["onHide","onShow","onDblClick","onMouseOver","onMouseUp","onMouseDown","onclick","onTouchEnd","onTouchMove","onTouchStart","onRightClick","onMouseOut"]),{bezierCurve:l,setBezierCurve:s}},S=t.forwardRef((e,o)=>{var{bezierCurve:n}=L(e);return(0,t.useImperativeHandle)(o,()=>(0,u.A)({},e,{bezierCurve:n})),null}),x=["visiable","visible"],R=function(e){void 0===e&&(e={});var{visiable:o,visible:n}=e,r=(0,a.A)(e,x),{map:i}=g(),[l,s]=(0,t.useState)();return(0,t.useLayoutEffect)(()=>{if(AMap&&i&&!l){var e=new AMap.Circle((0,u.A)({},r));return i.add(e),s(e),()=>{i&&i.remove(e),s(void 0)}}},[i]),v(l,null!=n?n:o),A(l,e,["Center","Raius","Options","ExtData"]),M(l,e,["onHide","onShow","onRightClick","onClick","onTouchEnd","onDblClick","onTouchMove","onTouchStart","onMouseOut","onMouseOver","onMouseUp","onMouseDown"]),{circle:l,setCircle:s}},O=t.forwardRef((e,o)=>{var{circle:n}=R(e);return(0,t.useImperativeHandle)(o,()=>(0,u.A)({},e,{circle:n})),null}),P=["visiable","visible"],U=function(e){void 0===e&&(e={});var{visiable:o,visible:n}=e,r=(0,a.A)(e,P),{map:i}=g(),[l,s]=(0,t.useState)();return(0,t.useEffect)(()=>{if(AMap&&i&&!l){var e=new AMap.CircleMarker((0,u.A)({},r));return i.add(e),s(e),()=>{e&&(AMap.v?i&&i.remove(e):i&&i.removeLayer(e),s(void 0))}}},[i]),v(l,null!=n?n:o),A(l,e,["Center","Raius","zIndex","Bubble","Cursor","StrokeColor","StrokeOpacity","StrokeWeight","FillColor","FillOpacity","Draggable","ExtData"]),M(l,e,["onHide","onShow","onMouseover","onTouchend","onClick","onTouchmove","onRightclick","onMouseup","onMouseout","onTouchstart","onMousedown","onDblclick"]),{circleMarker:l,setCircleMarker:s}},D=t.forwardRef((e,o)=>{var{circleMarker:n}=U(e);return(0,t.useImperativeHandle)(o,()=>(0,u.A)({},e,{circleMarker:n})),null}),H=["position"],z=function(e){void 0===e&&(e={});var{position:o}=e,n=(0,a.A)(e,H),{map:r}=g(),[i,l]=(0,t.useState)();return(0,t.useEffect)(()=>{if(AMap&&r&&!i){var e=new AMap.ContextMenu((0,u.A)({},n));l(e);var a=n=>e.open(r,o||n.lnglat);return r.on("rightclick",a),()=>{e&&(e.close(),r.off("rightclick",a),l(void 0))}}},[r]),M(i,e,["onOpen","onClose"]),{contextMenu:i,setContextMenu:l}},B=function(){};var N=t.forwardRef((e,o)=>{var{contextMenu:n}=z(e);(0,t.useImperativeHandle)(o,()=>(0,u.A)({},e,{contextMenu:n}));var a=t.Children.toArray(e.children);return(0,i.jsx)(t.Fragment,{children:AMap&&n&&a.map((o,a)=>t.isValidElement(o)?t.cloneElement(o,(0,u.A)({},o.props,{AMap:AMap,map:e.map,contextMenu:n,key:a})):null)})});function j(e){void 0===e&&(e={});var{position:o,visiable:n,visible:a,offset:r}=e,[i,l]=(0,t.useState)(),{map:s}=g();return(0,t.useEffect)(()=>{var e;if(s&&!i)return s.plugin(["AMap.ControlBar","AMap.HawkEye"],()=>{e=new AMap.ControlBar({offset:r,position:o}),s.addControl(e),l(e)}),()=>{e&&s.removeControl(e)}},[s]),v(i,null!=a?a:n),{controlBarControl:i,setControlBarControl:l}}N.Item=function(e){void 0===e&&(e={});var{text:o="",onClick:n=B}=e;return(0,t.useEffect)(()=>(e.contextMenu&&e.contextMenu.addItem(o,n,1),()=>{e.contextMenu&&e.contextMenu.removeItem(o,n)}),[e.contextMenu,e.text,e.onClick]),null};var W=t.forwardRef((e,o)=>{var{controlBarControl:n}=j(e);return(0,t.useImperativeHandle)(o,()=>(0,u.A)({},e,{controlBarControl:n}),[n]),null}),Z=["visiable","visible"],_=function(e){void 0===e&&(e={});var{visiable:o,visible:n}=e,r=(0,a.A)(e,Z),{map:i}=g(),[l,s]=(0,t.useState)();return(0,t.useLayoutEffect)(()=>{if(AMap&&i&&!l){var e=new AMap.Ellipse((0,u.A)({},r));return i.add(e),s(e),()=>{e&&(AMap.v?i&&i.remove(e):i&&i.removeLayer(e),s(void 0))}}},[i]),v(l,null!=n?n:o),A(l,e,["Center","Radius","Options","ExtData"]),M(l,e,["onHide","onShow","onClick","onDblClick","onRightClick","onMouseOut","onMouseOver","onMouseUp","onMouseDown","onTouchEnd","onTouchMove","onTouchStart"]),{ellipse:l,setEllipse:s}},G=t.forwardRef((e,o)=>{var{ellipse:n}=_(e);return(0,t.useImperativeHandle)(o,()=>(0,u.A)({},e,{ellipse:n})),null}),F=["type","onComplete","onError"],Y=function(e){void 0===e&&(e={});var{type:o="position",onComplete:n,onError:r}=e,i=(0,a.A)(e,F),[l,s]=(0,t.useState)(),{map:c}=g();function p(e,o){"complete"===e&&n?n(o):r&&r(o)}return(0,t.useEffect)(()=>{var e;if(AMap&&!l)return AMap.plugin(["AMap.Geolocation"],()=>{e=new AMap.Geolocation((0,u.A)({},i)),s(e)}),()=>{e&&s(void 0)}},[AMap]),(0,t.useMemo)(()=>{if(/^(position|cityInfo)$/.test(o)){var e="position"===o?"getCurrentPosition":"getCityInfo";l&&c?(l[e](p),c.addControl(l)):l&&l[e](p)}},[l]),{geolocation:l,setGeolocation:s}},J=t.forwardRef((e,o)=>{var{geolocation:n}=Y(e);return(0,t.useImperativeHandle)(o,()=>(0,u.A)({},e,{geolocation:n})),null}),K=["offset","visiable","visible"];function q(e){void 0===e&&(e={});var[o,n]=(0,t.useState)(),{offset:r,visiable:i,visible:l}=e,s=(0,a.A)(e,K),{map:c}=g();return(0,t.useEffect)(()=>{var e;c&&!o&&c.plugin(["AMap.HawkEye"],()=>{e=new AMap.HawkEye((0,u.A)({offset:r},s)),c.addControl(e),n(e)});return()=>{o&&c&&(c&&c.removeControl(o),n(void 0))}},[c,o]),v(o,null!=l?l:i),{hawkEyeControl:o,setHawkEyeControl:n}}var V=t.forwardRef((e,o)=>{var{hawkEyeControl:n}=q(e);return(0,t.useImperativeHandle)(o,()=>(0,u.A)({},e,{hawkEyeControl:n}),[n]),null}),$=["visiable","visible","position"],Q=function(e){void 0===e&&(e={});var{visiable:o,visible:n,position:r}=e,i=(0,a.A)(e,$),{map:l}=g(),[s,c]=(0,t.useState)(o),[d,v]=(0,t.useState)(),{container:f,Portal:m}=p();(0,t.useLayoutEffect)(()=>{if(AMap&&l&&!d){var o=l.getCenter();e.children&&(i.content=f);var n=new AMap.InfoWindow((0,u.A)({},i,{position:r||o}));return v(n),s&&n.open(l,r||o),()=>{n&&(l&&l.remove(n),v(void 0))}}},[l]),(0,t.useEffect)(()=>{d&&d.setContent(e.children?f:i.content||"")},[e.children,f,i.content,d]);var h=null!=n?n:o;return(0,t.useMemo)(()=>{if(s!==h&&d&&l)if(c(h),h){var e=l.getCenter();d.open(l,r||e)}else d.close()},[h,d]),(0,t.useEffect)(()=>{if(l&&d&&h){var e=l.getCenter();d.open(l,r||e)}},[r]),A(d,e,["Content","Anchor","Size"]),M(d,e,["onOpen","onClose","onChange"]),{isOpen:s,setIsOpen:c,infoWindow:d,setInfoWindow:v,InfoWindowPortal:m}},X=t.forwardRef((e,o)=>{var{infoWindow:n,InfoWindowPortal:a}=Q(e);return(0,t.useImperativeHandle)(o,()=>(0,u.A)({},e,{infoWindow:n})),(0,i.jsx)(a,{children:e.children})}),ee=["visiable","visible","defaultType"];function oe(e){void 0===e&&(e={});var[o,n]=(0,t.useState)(),{visiable:r,visible:i,defaultType:l=0}=e,s=(0,a.A)(e,ee),{map:c}=g();return(0,t.useEffect)(()=>{var e;if(c&&!o)return c.plugin(["AMap.MapType"],()=>{e=new AMap.MapType((0,u.A)({defaultType:l},s)),c.addControl(e),n(e)}),()=>{e&&c.removeControl(e)}},[c]),v(o,null!=i?i:r),{mapTypeControl:o,setMapTypeControl:n}}var ne=t.forwardRef((e,o)=>{var{mapTypeControl:n}=oe(e);return(0,t.useImperativeHandle)(o,()=>(0,u.A)({},e,{mapTypeControl:n}),[n]),null});function ae(e){void 0===e&&(e={});var[o,n]=(0,t.useState)(),{visiable:a,visible:r,type:i,options:l}=e,{map:s}=g();return(0,t.useEffect)(()=>{if(s){var o=null;if(i)switch(i){case te.ROADNET:o=new AMap.TileLayer.RoadNet({});break;case te.SATELLITE:o=new AMap.TileLayer.Satellite({});break;case te.TRAFFIC:o=new AMap.TileLayer.Traffic({})}return l&&(o=new AMap.TileLayer(l)),o&&(s.add(o),e.onAdded&&e.onAdded(),n(o)),()=>{o&&(AMap.v?s&&s.remove(o):s&&s.removeLayer(o),n(null),e.onRemoved&&e.onRemoved())}}},[s,i,l]),v(o,null!=r?r:a),{tileLayer:o,setTileLayer:n}}var te=function(e){return e.SATELLITE="satellite",e.TRAFFIC="traffic",e.ROADNET="roadnet",e}({}),re=t.forwardRef((e,o)=>{var{tileLayer:n}=ae(e);return(0,t.useImperativeHandle)(o,()=>(0,u.A)({},e,{tileLayer:n}),[n]),null}),ie=["visiable","visible","children"],le=function(e){void 0===e&&(e={});var{visiable:o,visible:n}=e,r=(0,a.A)(e,ie),{map:i}=g(),[l,s]=(0,t.useState)(),{container:c,Portal:d}=p();return(0,t.useLayoutEffect)(()=>{if(i&&!l){e.children&&(r.content=c);var o=new AMap.Marker((0,u.A)({},r));return i.add(o),s(o),()=>{o&&(o.setMap(null),s(void 0))}}},[i]),v(l,null!=n?n:o),A(l,e,["Path","Anchor","Offset","Animation","Clickable","Position","Angle","Label","zIndex","Icon","Draggable","Cursor","Content","Map","Title","Top","Shadow","Shape","ExtData"]),M(l,e,["onClick","onDblClick","onRightClick","onMouseMove","onMouseOver","onMouseOut","onMouseDown","onMouseUp","onDragStart","onDragging","onDragEnd","onMoving","onMoveEnd","onMoveAlong","onTouchStart","onTouchMove","onTouchEnd"]),{marker:l,setMarker:s,MarkerPortal:d}},se=(0,t.forwardRef)((e,o)=>{var{marker:n,MarkerPortal:a}=le(e);return(0,t.useImperativeHandle)(o,()=>(0,u.A)({},e,{marker:n}),[n]),(0,i.jsx)(a,{children:e.children})}),ue=["visiable","visible","children","text","icon"],ce={image:"http://webapi.amap.com/theme/v1.3/markers/b/mark_bs.png",size:[19,32],anchor:"center"},pe=(0,t.forwardRef)((e,o)=>{var{labelMarker:n}=function(e){void 0===e&&(e={});var{visiable:o,visible:n,text:r,icon:i=ce}=e,l=(0,a.A)(e,ue),{map:s,AMap:c}=g(),[p,d]=(0,t.useState)();return(0,t.useLayoutEffect)(()=>{if(!p&&s){var e,o=r;r||(o={content:"",direction:"right",offset:[-20,-5],style:{fontSize:12,fillColor:"#22886f",strokeColor:"#fff",strokeWidth:2}});var n,a=new c.LabelMarker((0,u.A)({style:i,icon:i,text:o},l));return d(a),0===(null==c||null==(e=c.v)?void 0:e.indexOf("1.4"))&&(s.labelMarkersLayer?n=s.labelMarkersLayer:(s.labelMarkersLayer=n=new c.LabelsLayer({zooms:[3,20],zIndex:101,collision:!0,animation:!0}),s.add(n)),n.add(a)),s.add(a),()=>{var e,o;a&&(0===(null==c||null==(e=c.v)?void 0:e.indexOf("1.4"))?null==s||null==(o=s.labelMarkersLayer)||o.remove(a):a.remove(),d(void 0))}}},[s]),v(p,null!=n?n:o),A(p,e,["Name","Position","Zooms","Opacity","zIndex","Rank","Text","Icon","ExtData","Top"]),M(p,e,["onTouchStart","onTouchMove","onTouchEnd","onClick","onMouseMove","onMouseOver","onMouseDown","onMouseUp","onMouseOut","onMousedown","onMouseup","onTouchstart","onTouchmove","onTouchend","onMousemove","onMouseover","onMouseout"]),{labelMarker:p,setLabelMarker:d}}(e);return(0,t.useImperativeHandle)(o,()=>(0,u.A)({},e,{labelMarker:n}),[n]),null}),de=["visiable","visible"],ve=function(e){void 0===e&&(e={});var{visiable:o,visible:n}=e,r=(0,a.A)(e,de),{map:i}=g(),{opacity:l=1,zIndex:s=1111,style:u,data:c}=r||{},[p,d]=(0,t.useState)();return(0,t.useLayoutEffect)(()=>{if(AMap&&i&&!p){var e=u;e||(e=[{url:"https://webapi.amap.com/images/mass/mass0.png",anchor:new AMap.Pixel(6,6),size:new AMap.Size(11,11),zIndex:3},{url:"https://webapi.amap.com/images/mass/mass1.png",anchor:new AMap.Pixel(4,4),size:new AMap.Size(7,7),zIndex:2},{url:"https://webapi.amap.com/images/mass/mass2.png",anchor:new AMap.Pixel(3,3),size:new AMap.Size(5,5),zIndex:1}]);var o=new AMap.MassMarks(c||[],{opacity:l,zIndex:s,style:e});return d(o),o.setMap(i),()=>{o&&(o.clear(),d(void 0))}}},[i]),v(p,null!=n?n:o),A(p,e,["Map","Data","Style","Opacity","zIndex","Zooms"]),M(p,e,["onClick","onDblClick","onMouseMove","onMouseOut","onMouseUp","onMouseDown","onMouseOver","onTouchStart","onTouchEnd"]),{massMarks:p,setMassMarks:d}},fe=t.forwardRef((e,o)=>{var{massMarks:n}=ve(e);return(0,t.useImperativeHandle)(o,()=>(0,u.A)({},e,{massMarks:n}),[n,e]),null}),Me=["visiable","visible"],Ae=["path"],me=function(e){void 0===e&&(e={});var{visiable:o,visible:n}=e,r=(0,a.A)(e,Me),{map:i}=g(),[l,s]=(0,t.useState)();return(0,t.useLayoutEffect)(()=>{if(AMap&&i&&!l){var e=new AMap.Polygon((0,u.A)({},r));return i.add(e),s(e),()=>{if(e)try{i&&i.remove(e)}catch(o){}s(void 0)}}},[i]),(0,t.useEffect)(()=>{if(l){var{path:e}=r,o=(0,a.A)(r,Ae);e&&l.setPath(e),l.setOptions(o)}},[l,r]),v(l,null!=n?n:o),A(l,e,["Path","Options","Map","ExtData","Draggable"]),M(l,e,["onClick","onDblClick","onRightClick","onHide","onShow","onMouseDown","onMouseUp","onMouseOver","onMouseOut","onChange","onDragStart","onDragging","onDragEnd","onTouchStart","onTouchMove","onTouchEnd"]),{polygon:l,setPolygon:s}},he=(0,t.createContext)(void 0),Ce=(0,t.forwardRef)((e,o)=>{var{children:n}=e,{polygon:a}=me(e);return(0,t.useImperativeHandle)(o,()=>(0,u.A)({},e,{polygon:a}),[a]),(0,i.jsx)(he.Provider,{value:a,children:n})}),Ee=(0,t.forwardRef)((e,o)=>{var{active:n}=e,{map:a}=g(),r=(0,t.useContext)(he),[i,l]=(0,t.useState)(!0),[s,c]=(0,t.useState)();return(0,t.useImperativeHandle)(o,()=>(0,u.A)({},e,{polyEditor:s})),(0,t.useEffect)(()=>{if(r&&a&&!s&&AMap&&AMap.PolygonEditor){var e=new AMap.PolygonEditor(a,r);r.on("hide",()=>l(!1)),r.on("show",()=>l(!0)),c(e)}},[r]),(0,t.useEffect)(()=>{s&&(i&&!n&&r?(s.close(),e.onEnd&&e.onEnd({target:r})):i&&n&&r?(s.open(),e.onAdd&&e.onAdd({target:r})):!i&&n&&r&&(s.close(),e.onEnd&&e.onEnd({target:r})))},[n,i,r]),M(s,e,["onEnd","onAddnode","onRemovenode","onAdjust","onMove","onAdd"]),null}),we=["visiable","visible"],ge=["path"];function ye(e){void 0===e&&(e={});var[o,n]=(0,t.useState)(),{visiable:r,visible:i}=e,l=(0,a.A)(e,we),{map:s}=g();return(0,t.useLayoutEffect)(()=>{if(s&&!o){var e=new AMap.Polyline(l);return s.add(e),n(e),()=>{if(e){try{s&&s.remove(e)}catch(o){}n(void 0)}}}},[s]),(0,t.useEffect)(()=>{if(o){var{path:e}=l,n=(0,a.A)(l,ge);e&&o.setPath(e),o.setOptions(n)}},[o,l]),v(o,null!=i?i:r),A(o,e,["Path","Options","Map","ExtData","Draggable"]),M(o,e,["onHide","onShow","onMouseOut","onChange","onDragStart","onDragging","onDragEnd","onRightClick","onDblClick","onMouseDown","onClick","onMouseOver","onTouchEnd","onTouchMove","onTouchStart","onMouseUp"]),{polyline:o,setPolyline:n}}var be=(0,t.createContext)(void 0),ke=t.forwardRef((e,o)=>{var{children:n}=e,{polyline:a}=ye(e);return(0,t.useImperativeHandle)(o,()=>(0,u.A)({},e,{polyline:a}),[a]),(0,i.jsx)(be.Provider,{value:a,children:n})}),Ie=(0,t.forwardRef)((e,o)=>{var n=(0,t.useContext)(be),a=(0,t.useContext)(he),{active:r,polyElement:i=n||a}=e,{map:l}=g(),[s,c]=(0,t.useState)(!0),[p,d]=(0,t.useState)();return(0,t.useImperativeHandle)(o,()=>(0,u.A)({},e,{polyEditor:p})),(0,t.useEffect)(()=>{if(i&&l&&!p&&AMap&&AMap.PolyEditor){var e=new AMap.PolyEditor(l,i);i.on("hide",()=>c(!1)),i.on("show",()=>c(!0)),d(e)}},[i]),(0,t.useEffect)(()=>{p&&(s&&!r?(p.close(),e.onEnd&&e.onEnd({type:"end",target:e.polyElement})):s&&r?p.open():!s&&r&&(p.close(),e.onEnd&&e.onEnd({type:"end",target:e.polyElement})))},[r,s]),M(p,e,["onEnd","onAddnode","onAdjust","onRemovenode"]),null}),Te=(0,t.forwardRef)((e,o)=>{var{active:n}=e,{map:a}=g(),r=(0,t.useContext)(be),[i,l]=(0,t.useState)(!0),[s,c]=(0,t.useState)();return(0,t.useImperativeHandle)(o,()=>(0,u.A)({},e,{polyEditor:s})),(0,t.useEffect)(()=>{if(r&&a&&!s&&AMap&&AMap.PolylineEditor){var e=new AMap.PolylineEditor(a,r);r.on("hide",()=>l(!1)),r.on("show",()=>l(!0)),c(e)}},[r]),(0,t.useEffect)(()=>{s&&(i&&!n&&r?(s.close(),e.onEnd&&e.onEnd({target:r})):i&&n&&r?(s.open(),e.onAdd&&e.onAdd({target:r})):!i&&n&&r&&(s.close(),e.onEnd&&e.onEnd({target:r})))},[n,i,r,s]),M(s,e,["onEnd","onAddnode","onRemovenode","onAdjust","onAdd"]),null}),Le=function(e){return e[e.MARKER=0]="MARKER",e[e.POLYLINE=1]="POLYLINE",e[e.POLYGON=2]="POLYGON",e[e.CIRCLE=3]="CIRCLE",e[e.RECTANGLE=4]="RECTANGLE",e[e.MEASUREAREA=5]="MEASUREAREA",e[e.RULE=6]="RULE",e[e.RECTZOOMIN=7]="RECTZOOMIN",e[e.RECTZOOMOUT=8]="RECTZOOMOUT",e}({}),Se=(0,t.forwardRef)((e,o)=>{var{active:n,type:a,drawElementOptions:r,ifClear:i}=e,{map:l}=g(),[s,c]=(0,t.useState)();return(0,t.useImperativeHandle)(o,()=>(0,u.A)({},e,{mouseTool:s})),(0,t.useEffect)(()=>{if(l&&!s&&AMap&&AMap.MouseTool){var e=new AMap.MouseTool(l);c(e)}},[l,Map,AMap.MouseTool]),(0,t.useEffect)(()=>{if(s)if(n)switch(a){case Le.MARKER:s.marker(r||{});break;case Le.POLYLINE:s.polyline(r||{});break;case Le.POLYGON:s.polygon(r||{});break;case Le.CIRCLE:s.circle(r||{});break;case Le.RECTANGLE:s.rectangle(r||{});break;case Le.MEASUREAREA:s.measureArea(r||{});break;case Le.RULE:s.rule(r||{});break;case Le.RECTZOOMIN:s.rectZoomIn(r||{});break;case Le.RECTZOOMOUT:s.rectZoomOut(r||{})}else s.close(i)},[n,i]),M(s,e,["onDraw"]),null}),xe=["visiable","visible"],Re=function(e){void 0===e&&(e={});var{visiable:o,visible:n}=e,r=(0,a.A)(e,xe),{map:i}=g(),[l,s]=(0,t.useState)();return(0,t.useLayoutEffect)(()=>{if(AMap&&i&&!l){var e=new AMap.Rectangle((0,u.A)({},r));return i.add(e),s(e),()=>{e&&(AMap.v?i&&i.remove(e):i&&i.removeLayer(e)),s(void 0)}}},[i]),v(l,null!=n?n:o),A(l,e,["Bounds","Options","Map","ExtData"]),M(l,e,["onHide","onShow","onClick","onDblClick","onRightClick","onMouseOut","onMouseOver","onMouseUp","onMouseDown","onTouchEnd","onTouchMove","onTouchStart"]),{rectangle:l,setRectangle:s}},Oe=t.forwardRef((e,o)=>{var{rectangle:n}=Re(e);return(0,t.useImperativeHandle)(o,()=>(0,u.A)({},e,{rectangle:n})),null}),Pe={};function Ue(e,o){void 0===o&&(o="_react_amap_css");var n=document&&(document.head||document.getElementsByTagName("head")[0]),a=document.getElementById(o);return new Promise((t,r)=>{if(!document||e in Pe||a)t();else{var i=document.createElement("link");i.type="text/css",i.rel="stylesheet",i.id=o,i.href=e,i.onerror=o=>{n.removeChild(i),r(new URIError("The css "+e+" is no accessible."))},i.onload=()=>{Pe[e]=!0,t()},n.appendChild(i)}})}function De(e,o){void 0===o&&(o="_react_amap_plugin");var n=document&&(document.head||document.getElementsByTagName("head")[0]),a=document.getElementById(o);return new Promise((t,r)=>{if(!document||e in Pe||a)t();else{var i=document.createElement("script");i.type="text/javascript",i.id=o,i.async=!0,i.defer=!0,i.src=e,i.onerror=o=>{n.removeChild(i),r(new URIError("The Script "+e+" is no accessible."))},i.onload=()=>{Pe[e]=!0,t()},n.appendChild(i)}})}function He(e){void 0===e&&(e={});var[o,n]=(0,t.useState)(),{position:a,visiable:r,visible:i,offset:l}=e,{map:s}=g();return(0,t.useEffect)(()=>{var e;if(s&&!o)return s.plugin(["AMap.Scale"],()=>{e=new AMap.Scale({offset:l,position:a}),s.addControl(e),n(e)}),()=>{e&&s.removeControl(e)}},[s]),v(o,null!=i?i:r),{scaleControl:o,setScaleControl:n}}var ze=t.forwardRef((e,o)=>{var{scaleControl:n}=He(e);return(0,t.useImperativeHandle)(o,()=>(0,u.A)({},e,{scaleControl:n}),[n]),null}),Be=["visiable","visible"],Ne=function(e){void 0===e&&(e={});var{visiable:o,visible:n}=e,r=(0,a.A)(e,Be),[i,l]=(0,t.useState)(),{map:s}=g(),{container:c,Portal:d}=p();return(0,t.useLayoutEffect)(()=>{if(AMap&&s&&!i){e.children&&(r.text=c.innerHTML);var o=new AMap.Text((0,u.A)({},r));return s.add(o),l(o),()=>{o&&(o.remove(),l(void 0))}}},[s]),(0,t.useEffect)(()=>{i&&i.setText(e.children?c.innerHTML:e.text||"")},[e.children,e.text,c,i]),v(i,null!=n?n:o),A(i,e,["Style","Title","Clickable","Draggable","Map","Position","Offset","Angle","zIndex","Top","Cursor","ExtData"]),M(i,e,["onMoving","onTouchMove","onTouchEnd","onMoveaLong","onTouchStart","onMoveEnd","onClick","onDblClick","onRightClick","onMouseMove","onMouseOver","onMouseOut","onMouseDown","onMouseUp","onDragStart","onDragEnd","onDragging"]),{text:i,setText:l,TextPortal:d}},je=(0,t.forwardRef)((e,o)=>{var{text:n,TextPortal:a}=Ne((0,u.A)({},e));return(0,t.useImperativeHandle)(o,()=>(0,u.A)({},e,{text:n})),e.children?(0,i.jsx)(a,{children:e.children}):null});function We(e){void 0===e&&(e={});var[o,n]=(0,t.useState)(),{position:a,visiable:r,visible:i,offset:l}=e,{map:s}=g();return(0,t.useEffect)(()=>{var e;if(s&&!o)return s.plugin(["AMap.ToolBar"],()=>{e=new AMap.ToolBar({offset:l,position:a}),s.addControl(e),n(e)}),()=>{e&&s.removeControl(e)}},[s]),v(o,null!=i?i:r),{toolBarControl:o,setToolBarControl:n}}var Ze=t.forwardRef((e,o)=>{var{toolBarControl:n}=We(e);return(0,t.useImperativeHandle)(o,()=>(0,u.A)({},e,{toolBarControl:n}),[n]),null}),_e=function(e){void 0===e&&(e={});var{city:o="",type:n="live",onComplete:a,onError:r}=e,[i,l]=(0,t.useState)(),s="live"===n?"getLive":"getForecast";return(0,t.useEffect)(()=>{var e;if(AMap&&!i)return AMap.plugin(["AMap.Weather"],()=>{e=new AMap.Weather,l(e)}),()=>{e&&l(void 0)}},[]),(0,t.useMemo)(()=>{var e;i&&o&&n&&(e=i,n&&o&&/^(live|forecast)$/.test(n)&&e[s](o,(e,o)=>{e&&r?r(e):o&&a&&a(o)}))},[i,o,n]),{weather:i,setWeather:l}},Ge=t.forwardRef((e,o)=>{var{weather:n}=_e(e);return(0,t.useImperativeHandle)(o,()=>(0,u.A)({},e,{weather:n})),null})}}]);
//# sourceMappingURL=8014.6cbc649e.chunk.js.map