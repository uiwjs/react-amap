/*! For license information please see amap.min.js.LICENSE.txt */
!function(e,o){"object"===typeof exports&&"object"===typeof module?module.exports=o(require("react"),require("react-dom")):"function"===typeof define&&define.amd?define(["react","react-dom"],o):"object"===typeof exports?exports["@uiw/react-amap"]=o(require("react"),require("react-dom")):e["@uiw/react-amap"]=o(e.React,e.ReactDOM)}(self,((e,o)=>(()=>{"use strict";var n={144:function(e){e.exports=function(){function e(e){var t=[];return e.AMapUI&&t.push(o(e.AMapUI)),e.Loca&&t.push(n(e.Loca)),Promise.all(t)}function o(e){return new Promise((function(o,n){var a=[];if(e.plugins)for(var s=0;s<e.plugins.length;s+=1)-1==r.AMapUI.plugins.indexOf(e.plugins[s])&&a.push(e.plugins[s]);if(i.AMapUI===t.failed)n("\u524d\u6b21\u8bf7\u6c42 AMapUI \u5931\u8d25");else if(i.AMapUI===t.notload){i.AMapUI=t.loading,r.AMapUI.version=e.version||r.AMapUI.version,s=r.AMapUI.version;var u=document.body||document.head,c=document.createElement("script");c.type="text/javascript",c.src="https://webapi.amap.com/ui/"+s+"/main.js",c.onerror=function(e){i.AMapUI=t.failed,n("\u8bf7\u6c42 AMapUI \u5931\u8d25")},c.onload=function(){if(i.AMapUI=t.loaded,a.length)window.AMapUI.loadUI(a,(function(){for(var e=0,n=a.length;e<n;e++){var t=a[e].split("/").slice(-1)[0];window.AMapUI[t]=arguments[e]}for(o();l.AMapUI.length;)l.AMapUI.splice(0,1)[0]()}));else for(o();l.AMapUI.length;)l.AMapUI.splice(0,1)[0]()},u.appendChild(c)}else i.AMapUI===t.loaded?e.version&&e.version!==r.AMapUI.version?n("\u4e0d\u5141\u8bb8\u591a\u4e2a\u7248\u672c AMapUI \u6df7\u7528"):a.length?window.AMapUI.loadUI(a,(function(){for(var e=0,n=a.length;e<n;e++){var t=a[e].split("/").slice(-1)[0];window.AMapUI[t]=arguments[e]}o()})):o():e.version&&e.version!==r.AMapUI.version?n("\u4e0d\u5141\u8bb8\u591a\u4e2a\u7248\u672c AMapUI \u6df7\u7528"):l.AMapUI.push((function(e){e?n(e):a.length?window.AMapUI.loadUI(a,(function(){for(var e=0,n=a.length;e<n;e++){var t=a[e].split("/").slice(-1)[0];window.AMapUI[t]=arguments[e]}o()})):o()}))}))}function n(e){return new Promise((function(o,n){if(i.Loca===t.failed)n("\u524d\u6b21\u8bf7\u6c42 Loca \u5931\u8d25");else if(i.Loca===t.notload){i.Loca=t.loading,r.Loca.version=e.version||r.Loca.version;var a=r.Loca.version,s=r.AMap.version.startsWith("2"),u=a.startsWith("2");if(s&&!u||!s&&u)n("JSAPI \u4e0e Loca \u7248\u672c\u4e0d\u5bf9\u5e94\uff01\uff01");else{s=r.key,u=document.body||document.head;var c=document.createElement("script");c.type="text/javascript",c.src="https://webapi.amap.com/loca?v="+a+"&key="+s,c.onerror=function(e){i.Loca=t.failed,n("\u8bf7\u6c42 AMapUI \u5931\u8d25")},c.onload=function(){for(i.Loca=t.loaded,o();l.Loca.length;)l.Loca.splice(0,1)[0]()},u.appendChild(c)}}else i.Loca===t.loaded?e.version&&e.version!==r.Loca.version?n("\u4e0d\u5141\u8bb8\u591a\u4e2a\u7248\u672c Loca \u6df7\u7528"):o():e.version&&e.version!==r.Loca.version?n("\u4e0d\u5141\u8bb8\u591a\u4e2a\u7248\u672c Loca \u6df7\u7528"):l.Loca.push((function(e){e?n(e):n()}))}))}if(!window)throw Error("AMap JSAPI can only be used in Browser.");var t,a;(a=t||(t={})).notload="notload",a.loading="loading",a.loaded="loaded",a.failed="failed";var r={key:"",AMap:{version:"1.4.15",plugins:[]},AMapUI:{version:"1.1",plugins:[]},Loca:{version:"1.3.2"}},i={AMap:t.notload,AMapUI:t.notload,Loca:t.notload},l={AMap:[],AMapUI:[],Loca:[]},s=[],u=function(e){"function"==typeof e&&(i.AMap===t.loaded?e(window.AMap):s.push(e))};return{load:function(o){return new Promise((function(n,a){if(i.AMap==t.failed)a("");else if(i.AMap==t.notload){var l=o.key,c=o.version,p=o.plugins;l?(window.AMap&&"lbs.amap.com"!==location.host&&a("\u7981\u6b62\u591a\u79cdAPI\u52a0\u8f7d\u65b9\u5f0f\u6df7\u7528"),r.key=l,r.AMap.version=c||r.AMap.version,r.AMap.plugins=p||r.AMap.plugins,i.AMap=t.loading,c=document.body||document.head,window.___onAPILoaded=function(r){if(delete window.___onAPILoaded,r)i.AMap=t.failed,a(r);else for(i.AMap=t.loaded,e(o).then((function(){n(window.AMap)})).catch(a);s.length;)s.splice(0,1)[0]()},(p=document.createElement("script")).type="text/javascript",p.src="https://webapi.amap.com/maps?callback=___onAPILoaded&v="+r.AMap.version+"&key="+l+"&plugin="+r.AMap.plugins.join(","),p.onerror=function(e){i.AMap=t.failed,a(e)},c.appendChild(p)):a("\u8bf7\u586b\u5199key")}else if(i.AMap==t.loaded)if(o.key&&o.key!==r.key)a("\u591a\u4e2a\u4e0d\u4e00\u81f4\u7684 key");else if(o.version&&o.version!==r.AMap.version)a("\u4e0d\u5141\u8bb8\u591a\u4e2a\u7248\u672c JSAPI \u6df7\u7528");else{if(l=[],o.plugins)for(c=0;c<o.plugins.length;c+=1)-1==r.AMap.plugins.indexOf(o.plugins[c])&&l.push(o.plugins[c]);l.length?window.AMap.plugin(l,(function(){e(o).then((function(){n(window.AMap)})).catch(a)})):e(o).then((function(){n(window.AMap)})).catch(a)}else if(o.key&&o.key!==r.key)a("\u591a\u4e2a\u4e0d\u4e00\u81f4\u7684 key");else if(o.version&&o.version!==r.AMap.version)a("\u4e0d\u5141\u8bb8\u591a\u4e2a\u7248\u672c JSAPI \u6df7\u7528");else{var d=[];if(o.plugins)for(c=0;c<o.plugins.length;c+=1)-1==r.AMap.plugins.indexOf(o.plugins[c])&&d.push(o.plugins[c]);u((function(){d.length?window.AMap.plugin(d,(function(){e(o).then((function(){n(window.AMap)})).catch(a)})):e(o).then((function(){n(window.AMap)})).catch(a)}))}}))},reset:function(){delete window.AMap,delete window.AMapUI,delete window.Loca,r={key:"",AMap:{version:"1.4.15",plugins:[]},AMapUI:{version:"1.1",plugins:[]},Loca:{version:"1.3.2"}},i={AMap:t.notload,AMapUI:t.notload,Loca:t.notload},l={AMap:[],AMapUI:[],Loca:[]}}}}()},873:(e,o,n)=>{var t=n(3);o.H=t.createRoot,t.hydrateRoot},335:(e,o,n)=>{var t=n(442),a=Symbol.for("react.element"),r=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,l=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function u(e,o,n){var t,r={},u=null,c=null;for(t in void 0!==n&&(u=""+n),void 0!==o.key&&(u=""+o.key),void 0!==o.ref&&(c=o.ref),o)i.call(o,t)&&!s.hasOwnProperty(t)&&(r[t]=o[t]);if(e&&e.defaultProps)for(t in o=e.defaultProps)void 0===r[t]&&(r[t]=o[t]);return{$$typeof:a,type:e,key:u,ref:c,props:r,_owner:l.current}}o.jsx=u,o.jsxs=u},85:(e,o,n)=>{e.exports=n(335)},442:o=>{o.exports=e},3:e=>{e.exports=o}},t={};function a(e){var o=t[e];if(void 0!==o)return o.exports;var r=t[e]={exports:{}};return n[e].call(r.exports,r,r.exports,a),r.exports}a.n=e=>{var o=e&&e.__esModule?()=>e.default:()=>e;return a.d(o,{a:o}),o},a.d=(e,o)=>{for(var n in o)a.o(o,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:o[n]})},a.o=(e,o)=>Object.prototype.hasOwnProperty.call(e,o),a.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r={};function i(e,o){if(null==e)return{};var n={};for(var t in e)if({}.hasOwnProperty.call(e,t)){if(o.indexOf(t)>=0)continue;n[t]=e[t]}return n}a.r(r),a.d(r,{APILoader:()=>d,AutoComplete:()=>g,BezierCurve:()=>U,Circle:()=>z,CircleMarker:()=>B,Context:()=>b,ContextMenu:()=>F,ControlBarControl:()=>Y,Ellipse:()=>$,Geolocation:()=>Q,HawkEyeControl:()=>oe,InfoWindow:()=>ae,LabelMarker:()=>me,Map:()=>R,MapTypeControl:()=>le,Marker:()=>ve,MassMarks:()=>Ee,MouseTool:()=>Oe,MouseToolDrawType:()=>Re,PolyEditor:()=>xe,Polygon:()=>ge,PolygonContext:()=>Ce,PolygonEditor:()=>ke,Polyline:()=>Se,PolylineContext:()=>Te,PolylineEditor:()=>Le,Provider:()=>L,Rectangle:()=>De,ScaleControl:()=>Be,Text:()=>Ze,TileLayer:()=>ce,TileLayerType:()=>ue,ToolBarControl:()=>Ge,Weather:()=>qe,initialState:()=>k,reducer:()=>I,requireCss:()=>ze,requireScript:()=>_e,useAutoComplete:()=>C,useBezierCurve:()=>P,useCircle:()=>H,useCircleMarker:()=>j,useContextMenu:()=>W,useControlBarControl:()=>G,useEllipse:()=>J,useEventProperties:()=>w,useGeolocation:()=>V,useHawkEyeControl:()=>ee,useInfoWindow:()=>te,useMap:()=>S,useMapContext:()=>T,useMapTypeControl:()=>ie,useMarker:()=>de,useMassMarks:()=>he,usePolygon:()=>ye,usePolyline:()=>be,usePortal:()=>m,usePrevious:()=>E,useRectangle:()=>Ue,useScaleControl:()=>je,useSetStatus:()=>A,useSettingProperties:()=>y,useText:()=>We,useTileLayer:()=>se,useToolBarControl:()=>Fe,useVisiable:()=>h,useWeather:()=>Ye});var l=a(442),s=a.n(l),u=a(144),c=a(85),p=["children"],d=e=>{var{children:o}=e,n=i(e,p),[t,a]=(0,l.useState)(!1),[r,s]=(0,l.useState)();return(0,l.useEffect)((()=>{var e=n.akey||"",o=n.plugins;(0,u.load)({key:e,plugins:o,version:n.version||"2.0",AMapUI:n.AMapUI,Loca:n.Loca}).then((()=>{s(void 0),a(!0)})).catch((e=>{s(e)}))}),[n.akey]),r?(0,c.jsx)("div",{style:{color:"red"},children:r.message}):t?(0,c.jsx)(l.Fragment,{children:o}):null};function v(){return v=Object.assign?Object.assign.bind():function(e){for(var o=1;o<arguments.length;o++){var n=arguments[o];for(var t in n)({}).hasOwnProperty.call(n,t)&&(e[t]=n[t])}return e},v.apply(null,arguments)}var f=a(3),M=a(873),m=()=>{var e=(0,l.useRef)(),[o]=s().useState((()=>{var o=document.createElement("div");return e.current=(0,M.H)(o),o})),[n,t]=(0,l.useState)({render:()=>null,remove:()=>null}),a=s().useCallback((o=>({render:e=>{var{children:n}=e;return n?(0,f.createPortal)(n,o):null},remove:o=>{var n=setTimeout((()=>{var t;o&&(null==(t=e.current)||t.unmount()),clearTimeout(n)}))}})),[]);return(0,l.useEffect)((()=>{o&&n.remove();var e=a(o);return t(e),()=>{e.remove(o)}}),[o]),{Portal:n.render,container:o}};function A(e,o,n){void 0===o&&(o={}),void 0===n&&(n=[]),n.forEach((n=>{var t=n,[a,r]=(0,l.useState)(o[t]);(0,l.useEffect)((()=>{if(e&&void 0!==o[t]&&o[t]!==a){var n=e.getStatus();e.setStatus(v({},n,{[t]:o[t]})),r(o[t])}}),[e,o[t]])}))}function h(e,o){var[n,t]=(0,l.useState)(o);(0,l.useEffect)((()=>{e&&void 0!==o&&(o?e.show&&e.show():e.hide&&e.hide(),o!==n&&t(o))}),[e,o])}function E(e){var o=(0,l.useRef)();return(0,l.useEffect)((()=>{o.current=e})),o.current}function w(e,o,n,t){void 0===o&&(o={}),void 0===n&&(n=[]),n.forEach((n=>{var t=o[n];(0,l.useEffect)((()=>{if(e){var o=n.toLocaleLowerCase().replace(/^on/,"");return t&&o&&e.on(o,t),()=>{o&&t&&e.off(o,t)}}}),[e,t])}))}function y(e,o,n){void 0===e&&(e={}),void 0===o&&(o={}),void 0===n&&(n=[]),n.forEach((n=>{var t="set"+n,a=""+n.charAt(0).toLowerCase()+n.slice(1),r=o[a],[i,s]=(0,l.useState)(r);(0,l.useEffect)((()=>{e&&void 0!==r&&r!==i&&e[t]&&"function"===typeof e[t]&&(e[t](r),s(r))}),[e,r])}))}var C=function(e){void 0===e&&(e={});var[o,n]=(0,l.useState)();return(0,l.useEffect)((()=>{var t;if(AMap&&!o)return AMap.v?AMap.plugin(["AMap.Autocomplete"],(()=>{t=new AMap.Autocomplete(e),n(t)})):AMap.plugin(["AMap.AutoComplete"],(()=>{t=new AMap.AutoComplete(e),n(t)})),()=>{t&&n(void 0)}}),[]),y(o,e,["Type","City","CityLimit"]),w(o,e,["onChoose","onSelect"]),{autoComplete:o,setAutoComplete:n}},g=s().forwardRef(((e,o)=>{var{autoComplete:n}=C(e);return(0,l.useImperativeHandle)(o,(()=>v({},e,{autoComplete:n}))),null}));var k={map:void 0,AMap:void 0,container:void 0},I=(e,o)=>v({},e,o),b=s().createContext({state:k,dispatch:()=>null});function T(){var{state:e,dispatch:o}=(0,l.useContext)(b);return v({},e,{state:e,dispatch:o})}var S=function(e){void 0===e&&(e={});var o=v({},(function(e){if(null==e)throw new TypeError("Cannot destructure "+e)}(e),e)),[n,t]=(0,l.useState)(),[a,r]=(0,l.useState)(e.zoom||15),[i,s]=(0,l.useState)(e.container),{dispatch:u}=(0,l.useContext)(b);return(0,l.useEffect)((()=>{if(i&&!n&&AMap){i.className=i.className+" react-amap-wapper";var e=new AMap.Map(i,v({zoom:a},o));t(e)}return()=>{n&&(n.clearInfoWindow(),n.clearLimitBounds(),n.clearMap(),n.destroy(),t(void 0))}}),[i,n]),(0,l.useEffect)((()=>(n&&i&&u({map:n,container:i,AMap:AMap}),()=>{u({map:void 0,container:void 0,AMap:void 0})})),[n,i]),(0,l.useMemo)((()=>{n&&"number"===typeof e.zoom&&a!==e.zoom&&e.zoom>=2&&e.zoom<=20&&(r(e.zoom),n.setZoom(e.zoom))}),[a,e.zoom]),(0,l.useMemo)((()=>{e.center&&n&&n.setCenter(e.center)}),[n,e.center]),A(n,e,["dragEnable","zoomEnable","jogEnable","pitchEnable","rotateEnable","animateEnable","keyboardEnable"]),y(n,e,["Zoom","LabelzIndex","Layers","City","Bounds","LimitBounds","Lang","Rotation","DefaultCursor","MapStyle","Features","DefaultLayer","Pitch"]),w(n,e,["onMouseMove","onZoomChange","onMapMove","onMouseWheel","onZoomStart","onMouseOver","onMouseOut","onDblClick","onClick","onZoomEnd","onMoveEnd","onMouseUp","onMouseDown","onRightClick","onMoveStart","onDragStart","onDragging","onDragEnd","onHotspotOut","onHotspotOver","onTouchStart","onComplete","onHotspotClick","onTouchMove","onTouchEnd","onResize"]),{map:n,setMap:t,zoom:a,setZoom:r,container:i,setContainer:s}},x=["className","children"],L=e=>{var[o,n]=(0,l.useReducer)(I,k);return(0,c.jsx)(b.Provider,{value:v({},o,{state:o,dispatch:n}),children:e.children})},R=(0,l.forwardRef)(((e,o)=>{var{className:n,children:t}=e,a=i(e,x),r=window.AMap,[s,u]=(0,l.useReducer)(I,k),p=(0,l.useRef)(null),{setContainer:d,container:f,map:M}=S(v({container:a.container||p.current},a));return(0,l.useEffect)((()=>d(p.current)),[p.current]),(0,l.useImperativeHandle)(o,(()=>v({},a,{map:M,AMap:r,container:a.container||p.current})),[M]),(0,l.useEffect)((()=>{M&&u({map:M,container:p.current,AMap:r})}),[M]),(0,c.jsxs)(b.Provider,{value:v({},s,{state:s,dispatch:u}),children:[!a.container&&(0,c.jsx)("div",{ref:p,className:n,style:v({fontSize:1,width:"100%",height:"100%"},a.style)}),r&&M&&"function"===typeof t&&t({AMap:r,map:M,container:f}),r&&M&&"function"!==typeof t&&t]})})),O=["visiable"],P=function(e){void 0===e&&(e={});var{visiable:o}=e,n=i(e,O),{map:t}=T(),[a,r]=(0,l.useState)();return(0,l.useEffect)((()=>{if(AMap&&t&&!a){var e=new AMap.BezierCurve(v({},n));return t.add(e),r(e),()=>{e&&(AMap.v?t&&t.remove(e):t&&t.removeLayer(e),r(void 0))}}}),[t]),h(a,o),y(a,e,["Options","Path","ExtData","ExtData"]),w(a,e,["onHide","onShow","onDblClick","onMouseOver","onMouseUp","onMouseDown","onclick","onTouchEnd","onTouchMove","onTouchStart","onRightClick","onMouseOut"]),{bezierCurve:a,setBezierCurve:r}},U=s().forwardRef(((e,o)=>{var{bezierCurve:n}=P(e);return(0,l.useImperativeHandle)(o,(()=>v({},e,{bezierCurve:n}))),null})),D=["visiable"],H=function(e){void 0===e&&(e={});var{visiable:o}=e,n=i(e,D),{map:t}=T(),[a,r]=(0,l.useState)();return(0,l.useLayoutEffect)((()=>{if(AMap&&t&&!a){var e=new AMap.Circle(v({},n));return t.add(e),r(e),()=>{t&&t.remove(e),r(void 0)}}}),[t]),h(a,o),y(a,e,["Center","Raius","Options","ExtData"]),w(a,e,["onHide","onShow","onRightClick","onClick","onTouchEnd","onDblClick","onTouchMove","onTouchStart","onMouseOut","onMouseOver","onMouseUp","onMouseDown"]),{circle:a,setCircle:r}},z=s().forwardRef(((e,o)=>{var{circle:n}=H(e);return(0,l.useImperativeHandle)(o,(()=>v({},e,{circle:n}))),null})),_=["visiable"],j=function(e){void 0===e&&(e={});var{visiable:o}=e,n=i(e,_),{map:t}=T(),[a,r]=(0,l.useState)();return(0,l.useEffect)((()=>{if(AMap&&t&&!a){var e=new AMap.CircleMarker(v({},n));return t.add(e),r(e),()=>{e&&(AMap.v?t&&t.remove(e):t&&t.removeLayer(e),r(void 0))}}}),[t]),h(a,o),y(a,e,["Center","Raius","zIndex","Bubble","Cursor","StrokeColor","StrokeOpacity","StrokeWeight","FillColor","FillOpacity","Draggable","ExtData"]),w(a,e,["onHide","onShow","onMouseover","onTouchend","onClick","onTouchmove","onRightclick","onMouseup","onMouseout","onTouchstart","onMousedown","onDblclick"]),{circleMarker:a,setCircleMarker:r}},B=s().forwardRef(((e,o)=>{var{circleMarker:n}=j(e);return(0,l.useImperativeHandle)(o,(()=>v({},e,{circleMarker:n}))),null})),N=["position"],W=function(e){void 0===e&&(e={});var{position:o}=e,n=i(e,N),{map:t}=T(),[a,r]=(0,l.useState)();return(0,l.useEffect)((()=>{if(AMap&&t&&!a){var e=new AMap.ContextMenu(v({},n));r(e);var i=n=>e.open(t,o||n.lnglat);return t.on("rightclick",i),()=>{e&&(e.close(),t.off("rightclick",i),r(void 0))}}}),[t]),w(a,e,["onOpen","onClose"]),{contextMenu:a,setContextMenu:r}},Z=function(){};var F=s().forwardRef(((e,o)=>{var{contextMenu:n}=W(e);(0,l.useImperativeHandle)(o,(()=>v({},e,{contextMenu:n})));var t=s().Children.toArray(e.children);return(0,c.jsx)(l.Fragment,{children:AMap&&n&&t.map(((o,t)=>s().isValidElement(o)?s().cloneElement(o,v({},o.props,{AMap:AMap,map:e.map,contextMenu:n,key:t})):null))})}));function G(e){void 0===e&&(e={});var{position:o,visiable:n,offset:t}=e,[a,r]=(0,l.useState)(),{map:i}=T();return(0,l.useEffect)((()=>{var e;if(i&&!a)return i.plugin(["AMap.ControlBar","AMap.HawkEye"],(()=>{e=new AMap.ControlBar({offset:t,position:o}),i.addControl(e),r(e)})),()=>{e&&i.removeControl(e)}}),[i]),h(a,n),{controlBarControl:a,setControlBarControl:r}}F.Item=function(e){void 0===e&&(e={});var{text:o="",onClick:n=Z}=e;return(0,l.useEffect)((()=>(e.contextMenu&&e.contextMenu.addItem(o,n,1),()=>{e.contextMenu&&e.contextMenu.removeItem(o,n)})),[e.contextMenu,e.text,e.onClick]),null};var Y=s().forwardRef(((e,o)=>{var{controlBarControl:n}=G(e);return(0,l.useImperativeHandle)(o,(()=>v({},e,{controlBarControl:n})),[n]),null})),q=["visiable"],J=function(e){void 0===e&&(e={});var{visiable:o}=e,n=i(e,q),{map:t}=T(),[a,r]=(0,l.useState)();return(0,l.useLayoutEffect)((()=>{if(AMap&&t&&!a){var e=new AMap.Ellipse(v({},n));return t.add(e),r(e),()=>{e&&(AMap.v?t&&t.remove(e):t&&t.removeLayer(e),r(void 0))}}}),[t]),h(a,o),y(a,e,["Center","Radius","Options","ExtData"]),w(a,e,["onHide","onShow","onClick","onDblClick","onRightClick","onMouseOut","onMouseOver","onMouseUp","onMouseDown","onTouchEnd","onTouchMove","onTouchStart"]),{ellipse:a,setEllipse:r}},$=s().forwardRef(((e,o)=>{var{ellipse:n}=J(e);return(0,l.useImperativeHandle)(o,(()=>v({},e,{ellipse:n}))),null})),K=["type","onComplete","onError"],V=function(e){void 0===e&&(e={});var{type:o="position",onComplete:n,onError:t}=e,a=i(e,K),[r,s]=(0,l.useState)(),{map:u}=T();function c(e,o){"complete"===e&&n?n(o):t&&t(o)}return(0,l.useEffect)((()=>{var e;if(AMap&&!r)return AMap.plugin(["AMap.Geolocation"],(()=>{e=new AMap.Geolocation(v({},a)),s(e)})),()=>{e&&s(void 0)}}),[AMap]),(0,l.useMemo)((()=>{if(/^(position|cityInfo)$/.test(o)){var e="position"===o?"getCurrentPosition":"getCityInfo";r&&u?(r[e](c),u.addControl(r)):r&&r[e](c)}}),[r]),{geolocation:r,setGeolocation:s}},Q=s().forwardRef(((e,o)=>{var{geolocation:n}=V(e);return(0,l.useImperativeHandle)(o,(()=>v({},e,{geolocation:n}))),null})),X=["offset","visiable"];function ee(e){void 0===e&&(e={});var[o,n]=(0,l.useState)(),{offset:t,visiable:a}=e,r=i(e,X),{map:s}=T();return(0,l.useEffect)((()=>{var e;s&&!o&&s.plugin(["AMap.HawkEye"],(()=>{e=new AMap.HawkEye(v({offset:t},r)),s.addControl(e),n(e)}));return()=>{o&&s&&(s&&s.removeControl(o),n(void 0))}}),[s,o]),h(o,a),{hawkEyeControl:o,setHawkEyeControl:n}}var oe=s().forwardRef(((e,o)=>{var{hawkEyeControl:n}=ee(e);return(0,l.useImperativeHandle)(o,(()=>v({},e,{hawkEyeControl:n})),[n]),null})),ne=["visiable","position"],te=function(e){void 0===e&&(e={});var{visiable:o,position:n}=e,t=i(e,ne),{map:a}=T(),[r,s]=(0,l.useState)(o),[u,c]=(0,l.useState)(),{container:p,Portal:d}=m();return(0,l.useLayoutEffect)((()=>{if(AMap&&a&&!u){var o=a.getCenter();e.children&&(t.content=p);var i=new AMap.InfoWindow(v({},t,{position:n||o}));return c(i),r&&i.open(a,n||o),()=>{i&&(a&&a.remove(i),c(void 0))}}}),[a]),(0,l.useEffect)((()=>{u&&u.setContent(e.children?p:t.content||"")}),[e.children,p,t.content,u]),(0,l.useMemo)((()=>{if(r!==o&&u&&a)if(s(o),o){var e=a.getCenter();u.open(a,n||e)}else u.close()}),[o,u]),(0,l.useEffect)((()=>{if(a&&u&&o){var e=a.getCenter();u.open(a,n||e)}}),[n]),y(u,e,["Content","Anchor","Size"]),w(u,e,["onOpen","onClose","onChange"]),{isOpen:r,setIsOpen:s,infoWindow:u,setInfoWindow:c,InfoWindowPortal:d}},ae=s().forwardRef(((e,o)=>{var{infoWindow:n,InfoWindowPortal:t}=te(e);return(0,l.useImperativeHandle)(o,(()=>v({},e,{infoWindow:n}))),(0,c.jsx)(t,{children:e.children})})),re=["visiable","defaultType"];function ie(e){void 0===e&&(e={});var[o,n]=(0,l.useState)(),{visiable:t,defaultType:a=0}=e,r=i(e,re),{map:s}=T();return(0,l.useEffect)((()=>{var e;if(s&&!o)return s.plugin(["AMap.MapType"],(()=>{e=new AMap.MapType(v({defaultType:a},r)),s.addControl(e),n(e)})),()=>{e&&s.removeControl(e)}}),[s]),h(o,t),{mapTypeControl:o,setMapTypeControl:n}}var le=s().forwardRef(((e,o)=>{var{mapTypeControl:n}=ie(e);return(0,l.useImperativeHandle)(o,(()=>v({},e,{mapTypeControl:n})),[n]),null}));function se(e){void 0===e&&(e={});var[o,n]=(0,l.useState)(),{visiable:t,type:a,options:r}=e,{map:i}=T();return(0,l.useEffect)((()=>{if(i){var o=null;if(a)switch(a){case ue.ROADNET:o=new AMap.TileLayer.RoadNet({});break;case ue.SATELLITE:o=new AMap.TileLayer.Satellite({});break;case ue.TRAFFIC:o=new AMap.TileLayer.Traffic({})}return r&&(o=new AMap.TileLayer(r)),o&&(i.add(o),e.onAdded&&e.onAdded(),n(o)),()=>{o&&(AMap.v?i&&i.remove(o):i&&i.removeLayer(o),n(null),e.onRemoved&&e.onRemoved())}}}),[i,a,r]),h(o,t),{tileLayer:o,setTileLayer:n}}var ue=function(e){return e.SATELLITE="satellite",e.TRAFFIC="traffic",e.ROADNET="roadnet",e}({}),ce=s().forwardRef(((e,o)=>{var{tileLayer:n}=se(e);return(0,l.useImperativeHandle)(o,(()=>v({},e,{tileLayer:n})),[n]),null})),pe=["visiable","children"],de=function(e){void 0===e&&(e={});var{visiable:o}=e,n=i(e,pe),{map:t}=T(),[a,r]=(0,l.useState)(),{container:s,Portal:u}=m();return(0,l.useLayoutEffect)((()=>{if(t&&!a){e.children&&(n.content=s);var o=new AMap.Marker(v({},n));return t.add(o),r(o),()=>{o&&(o.setMap(null),r(void 0))}}}),[t]),h(a,o),y(a,e,["Path","Anchor","Offset","Animation","Clickable","Position","Angle","Label","zIndex","Icon","Draggable","Cursor","Content","Map","Title","Top","Shadow","Shape","ExtData"]),w(a,e,["onClick","onDblClick","onRightClick","onMouseMove","onMouseOver","onMouseOut","onMouseDown","onMouseUp","onDragStart","onDragging","onDragEnd","onMoving","onMoveEnd","onMoveAlong","onTouchStart","onTouchMove","onTouchEnd"]),{marker:a,setMarker:r,MarkerPortal:u}},ve=(0,l.forwardRef)(((e,o)=>{var{marker:n,MarkerPortal:t}=de(e);return(0,l.useImperativeHandle)(o,(()=>v({},e,{marker:n})),[n]),(0,c.jsx)(t,{children:e.children})})),fe=["visiable","children","text","icon"],Me={image:"http://webapi.amap.com/theme/v1.3/markers/b/mark_bs.png",size:[19,32],anchor:"center"},me=(0,l.forwardRef)(((e,o)=>{var{labelMarker:n}=function(e){void 0===e&&(e={});var{visiable:o,text:n,icon:t=Me}=e,a=i(e,fe),{map:r,AMap:s}=T(),[u,c]=(0,l.useState)();return(0,l.useLayoutEffect)((()=>{if(!u&&r){var e,o=n;n||(o={content:"",direction:"right",offset:[-20,-5],style:{fontSize:12,fillColor:"#22886f",strokeColor:"#fff",strokeWidth:2}});var i,l=new s.LabelMarker(v({style:t,icon:t,text:o},a));return c(l),0===(null==s||null==(e=s.v)?void 0:e.indexOf("1.4"))&&(r.labelMarkersLayer?i=r.labelMarkersLayer:(r.labelMarkersLayer=i=new s.LabelsLayer({zooms:[3,20],zIndex:101,collision:!0,animation:!0}),r.add(i)),i.add(l)),r.add(l),()=>{var e,o;l&&(0===(null==s||null==(e=s.v)?void 0:e.indexOf("1.4"))?null==r||null==(o=r.labelMarkersLayer)||o.remove(l):l.remove(),c(void 0))}}}),[r]),h(u,o),y(u,e,["Name","Position","Zooms","Opacity","zIndex","Rank","Text","Icon","ExtData","Top"]),w(u,e,["onTouchStart","onTouchMove","onTouchEnd","onClick","onMouseMove","onMouseOver","onMouseDown","onMouseUp","onMouseOut","onMousedown","onMouseup","onTouchstart","onTouchmove","onTouchend","onMousemove","onMouseover","onMouseout"]),{labelMarker:u,setLabelMarker:c}}(e);return(0,l.useImperativeHandle)(o,(()=>v({},e,{labelMarker:n})),[n]),null})),Ae=["visiable"],he=function(e){void 0===e&&(e={});var{visiable:o}=e,n=i(e,Ae),{map:t}=T(),{opacity:a=1,zIndex:r=1111,style:s,data:u}=n||{},[c,p]=(0,l.useState)();return(0,l.useLayoutEffect)((()=>{if(AMap&&t&&!c){var e=s;e||(e=[{url:"https://webapi.amap.com/images/mass/mass0.png",anchor:new AMap.Pixel(6,6),size:new AMap.Size(11,11),zIndex:3},{url:"https://webapi.amap.com/images/mass/mass1.png",anchor:new AMap.Pixel(4,4),size:new AMap.Size(7,7),zIndex:2},{url:"https://webapi.amap.com/images/mass/mass2.png",anchor:new AMap.Pixel(3,3),size:new AMap.Size(5,5),zIndex:1}]);var o=new AMap.MassMarks(u||[],{opacity:a,zIndex:r,style:e});return p(o),o.setMap(t),()=>{o&&(o.clear(),p(void 0))}}}),[t]),h(c,o),y(c,e,["Map","Data","Style","Opacity","zIndex","Zooms"]),w(c,e,["onClick","onDblClick","onMouseMove","onMouseOut","onMouseUp","onMouseDown","onMouseOver","onTouchStart","onTouchEnd"]),{massMarks:c,setMassMarks:p}},Ee=s().forwardRef(((e,o)=>{var{massMarks:n}=he(e);return(0,l.useImperativeHandle)(o,(()=>v({},e,{massMarks:n})),[n,e]),null})),we=["visiable"],ye=function(e){void 0===e&&(e={});var{visiable:o}=e,n=i(e,we),{map:t}=T(),[a,r]=(0,l.useState)();return(0,l.useLayoutEffect)((()=>{if(AMap&&t&&!a){var e=new AMap.Polygon(v({},n));return t.add(e),r(e),()=>{if(e)try{t&&t.remove(e)}catch(o){}r(void 0)}}}),[t]),(0,l.useEffect)((()=>{a&&a.setOptions(n)}),[a,n]),h(a,o),y(a,e,["Path","Options","Map","ExtData","Draggable"]),w(a,e,["onClick","onDblClick","onRightClick","onHide","onShow","onMouseDown","onMouseUp","onMouseOver","onMouseOut","onChange","onDragStart","onDragging","onDragEnd","onTouchStart","onTouchMove","onTouchEnd"]),{polygon:a,setPolygon:r}},Ce=(0,l.createContext)(void 0),ge=(0,l.forwardRef)(((e,o)=>{var{children:n}=e,{polygon:t}=ye(e);return(0,l.useImperativeHandle)(o,(()=>v({},e,{polygon:t})),[t]),(0,c.jsx)(Ce.Provider,{value:t,children:n})})),ke=(0,l.forwardRef)(((e,o)=>{var{active:n}=e,{map:t}=T(),a=(0,l.useContext)(Ce),[r,i]=(0,l.useState)(!0),[s,u]=(0,l.useState)();return(0,l.useImperativeHandle)(o,(()=>v({},e,{polyEditor:s}))),(0,l.useEffect)((()=>{if(a&&t&&!s&&AMap&&AMap.PolygonEditor){var e=new AMap.PolygonEditor(t,a);a.on("hide",(()=>i(!1))),a.on("show",(()=>i(!0))),u(e)}}),[a]),(0,l.useEffect)((()=>{s&&(r&&!n&&a?(s.close(),e.onEnd&&e.onEnd({target:a})):r&&n&&a?(s.open(),e.onAdd&&e.onAdd({target:a})):!r&&n&&a&&(s.close(),e.onEnd&&e.onEnd({target:a})))}),[n,r,a]),w(s,e,["onEnd","onAddnode","onRemovenode","onAdjust","onMove","onAdd"]),null})),Ie=["visiable"];function be(e){void 0===e&&(e={});var[o,n]=(0,l.useState)(),{visiable:t}=e,a=i(e,Ie),{map:r}=T();return(0,l.useLayoutEffect)((()=>{if(r&&!o){var e=new AMap.Polyline(a);return r.add(e),n(e),()=>{if(e){try{r&&r.remove(e)}catch(o){}n(void 0)}}}}),[r]),(0,l.useEffect)((()=>{o&&o.setOptions(a)}),[o,a]),h(o,t),y(o,e,["Path","Options","Map","ExtData","Draggable"]),w(o,e,["onHide","onShow","onMouseOut","onChange","onDragStart","onDragging","onDragEnd","onRightClick","onDblClick","onMouseDown","onClick","onMouseOver","onTouchEnd","onTouchMove","onTouchStart","onMouseUp"]),{polyline:o,setPolyline:n}}var Te=(0,l.createContext)(void 0),Se=s().forwardRef(((e,o)=>{var{children:n}=e,{polyline:t}=be(e);return(0,l.useImperativeHandle)(o,(()=>v({},e,{polyline:t})),[t]),(0,c.jsx)(Te.Provider,{value:t,children:n})})),xe=(0,l.forwardRef)(((e,o)=>{var n=(0,l.useContext)(Te),t=(0,l.useContext)(Ce),{active:a,polyElement:r=n||t}=e,{map:i}=T(),[s,u]=(0,l.useState)(!0),[c,p]=(0,l.useState)();return(0,l.useImperativeHandle)(o,(()=>v({},e,{polyEditor:c}))),(0,l.useEffect)((()=>{if(r&&i&&!c&&AMap&&AMap.PolyEditor){var e=new AMap.PolyEditor(i,r);r.on("hide",(()=>u(!1))),r.on("show",(()=>u(!0))),p(e)}}),[r]),(0,l.useEffect)((()=>{c&&(s&&!a?(c.close(),e.onEnd&&e.onEnd({type:"end",target:e.polyElement})):s&&a?c.open():!s&&a&&(c.close(),e.onEnd&&e.onEnd({type:"end",target:e.polyElement})))}),[a,s]),w(c,e,["onEnd","onAddnode","onAdjust","onRemovenode"]),null})),Le=(0,l.forwardRef)(((e,o)=>{var{active:n}=e,{map:t}=T(),a=(0,l.useContext)(Te),[r,i]=(0,l.useState)(!0),[s,u]=(0,l.useState)();return(0,l.useImperativeHandle)(o,(()=>v({},e,{polyEditor:s}))),(0,l.useEffect)((()=>{if(a&&t&&!s&&AMap&&AMap.PolylineEditor){var e=new AMap.PolylineEditor(t,a);a.on("hide",(()=>i(!1))),a.on("show",(()=>i(!0))),u(e)}}),[a]),(0,l.useEffect)((()=>{s&&(r&&!n&&a?(s.close(),e.onEnd&&e.onEnd({target:a})):r&&n&&a?(s.open(),e.onAdd&&e.onAdd({target:a})):!r&&n&&a&&(s.close(),e.onEnd&&e.onEnd({target:a})))}),[n,r,a,s]),w(s,e,["onEnd","onAddnode","onRemovenode","onAdjust","onAdd"]),null})),Re=function(e){return e[e.MARKER=0]="MARKER",e[e.POLYLINE=1]="POLYLINE",e[e.POLYGON=2]="POLYGON",e[e.CIRCLE=3]="CIRCLE",e[e.RECTANGLE=4]="RECTANGLE",e[e.MEASUREAREA=5]="MEASUREAREA",e[e.RULE=6]="RULE",e[e.RECTZOOMIN=7]="RECTZOOMIN",e[e.RECTZOOMOUT=8]="RECTZOOMOUT",e}({}),Oe=(0,l.forwardRef)(((e,o)=>{var{active:n,type:t,drawElementOptions:a,ifClear:r}=e,{map:i}=T(),[s,u]=(0,l.useState)();return(0,l.useImperativeHandle)(o,(()=>v({},e,{mouseTool:s}))),(0,l.useEffect)((()=>{if(i&&!s&&AMap&&AMap.MouseTool){var e=new AMap.MouseTool(i);u(e)}}),[i,Map,AMap.MouseTool]),(0,l.useEffect)((()=>{if(s)if(n)switch(t){case Re.MARKER:s.marker(a||{});break;case Re.POLYLINE:s.polyline(a||{});break;case Re.POLYGON:s.polygon(a||{});break;case Re.CIRCLE:s.circle(a||{});break;case Re.RECTANGLE:s.rectangle(a||{});break;case Re.MEASUREAREA:s.measureArea(a||{});break;case Re.RULE:s.rule(a||{});break;case Re.RECTZOOMIN:s.rectZoomIn(a||{});break;case Re.RECTZOOMOUT:s.rectZoomOut(a||{})}else s.close(r)}),[n,r]),w(s,e,["onDraw"]),null})),Pe=["visiable"],Ue=function(e){void 0===e&&(e={});var{visiable:o}=e,n=i(e,Pe),{map:t}=T(),[a,r]=(0,l.useState)();return(0,l.useLayoutEffect)((()=>{if(AMap&&t&&!a){var e=new AMap.Rectangle(v({},n));return t.add(e),r(e),()=>{e&&(AMap.v?t&&t.remove(e):t&&t.removeLayer(e)),r(void 0)}}}),[t]),h(a,o),y(a,e,["Bounds","Options","Map","ExtData"]),w(a,e,["onHide","onShow","onClick","onDblClick","onRightClick","onMouseOut","onMouseOver","onMouseUp","onMouseDown","onTouchEnd","onTouchMove","onTouchStart"]),{rectangle:a,setRectangle:r}},De=s().forwardRef(((e,o)=>{var{rectangle:n}=Ue(e);return(0,l.useImperativeHandle)(o,(()=>v({},e,{rectangle:n}))),null})),He={};function ze(e,o){void 0===o&&(o="_react_amap_css");var n=document&&(document.head||document.getElementsByTagName("head")[0]),t=document.getElementById(o);return new Promise(((a,r)=>{if(!document||e in He||t)a();else{var i=document.createElement("link");i.type="text/css",i.rel="stylesheet",i.id=o,i.href=e,i.onerror=o=>{n.removeChild(i),r(new URIError("The css "+e+" is no accessible."))},i.onload=()=>{He[e]=!0,a()},n.appendChild(i)}}))}function _e(e,o){void 0===o&&(o="_react_amap_plugin");var n=document&&(document.head||document.getElementsByTagName("head")[0]),t=document.getElementById(o);return new Promise(((a,r)=>{if(!document||e in He||t)a();else{var i=document.createElement("script");i.type="text/javascript",i.id=o,i.async=!0,i.defer=!0,i.src=e,i.onerror=o=>{n.removeChild(i),r(new URIError("The Script "+e+" is no accessible."))},i.onload=()=>{He[e]=!0,a()},n.appendChild(i)}}))}function je(e){void 0===e&&(e={});var[o,n]=(0,l.useState)(),{position:t,visiable:a,offset:r}=e,{map:i}=T();return(0,l.useEffect)((()=>{var e;if(i&&!o)return i.plugin(["AMap.Scale"],(()=>{e=new AMap.Scale({offset:r,position:t}),i.addControl(e),n(e)})),()=>{e&&i.removeControl(e)}}),[i]),h(o,a),{scaleControl:o,setScaleControl:n}}var Be=s().forwardRef(((e,o)=>{var{scaleControl:n}=je(e);return(0,l.useImperativeHandle)(o,(()=>v({},e,{scaleControl:n})),[n]),null})),Ne=["visiable"],We=function(e){void 0===e&&(e={});var{visiable:o}=e,n=i(e,Ne),[t,a]=(0,l.useState)(),{map:r}=T(),{container:s,Portal:u}=m();return(0,l.useLayoutEffect)((()=>{if(AMap&&r&&!t){e.children&&(n.text=s.innerHTML);var o=new AMap.Text(v({},n));return r.add(o),a(o),()=>{o&&(o.remove(),a(void 0))}}}),[r]),(0,l.useEffect)((()=>{t&&t.setText(e.children?s.innerHTML:e.text||"")}),[e.children,e.text,s,t]),h(t,o),y(t,e,["Style","Title","Clickable","Draggable","Map","Position","Offset","Angle","zIndex","Top","Cursor","ExtData"]),w(t,e,["onMoving","onTouchMove","onTouchEnd","onMoveaLong","onTouchStart","onMoveEnd","onClick","onDblClick","onRightClick","onMouseMove","onMouseOver","onMouseOut","onMouseDown","onMouseUp","onDragStart","onDragEnd","onDragging"]),{text:t,setText:a,TextPortal:u}},Ze=(0,l.forwardRef)(((e,o)=>{var{text:n,TextPortal:t}=We(v({},e));return(0,l.useImperativeHandle)(o,(()=>v({},e,{text:n}))),e.children?(0,c.jsx)(t,{children:e.children}):null}));function Fe(e){void 0===e&&(e={});var[o,n]=(0,l.useState)(),{position:t,visiable:a,offset:r}=e,{map:i}=T();return(0,l.useEffect)((()=>{var e;if(i&&!o)return i.plugin(["AMap.ToolBar"],(()=>{e=new AMap.ToolBar({offset:r,position:t}),i.addControl(e),n(e)})),()=>{e&&i.removeControl(e)}}),[i]),h(o,a),{toolBarControl:o,setToolBarControl:n}}var Ge=s().forwardRef(((e,o)=>{var{toolBarControl:n}=Fe(e);return(0,l.useImperativeHandle)(o,(()=>v({},e,{toolBarControl:n})),[n]),null})),Ye=function(e){void 0===e&&(e={});var{city:o="",type:n="live",onComplete:t,onError:a}=e,[r,i]=(0,l.useState)(),s="live"===n?"getLive":"getForecast";return(0,l.useEffect)((()=>{var e;if(AMap&&!r)return AMap.plugin(["AMap.Weather"],(()=>{e=new AMap.Weather,i(e)})),()=>{e&&i(void 0)}}),[]),(0,l.useMemo)((()=>{var e;r&&o&&n&&(e=r,n&&o&&/^(live|forecast)$/.test(n)&&e[s](o,((e,o)=>{e&&a?a(e):o&&t&&t(o)})))}),[r,o,n]),{weather:r,setWeather:i}},qe=s().forwardRef(((e,o)=>{var{weather:n}=Ye(e);return(0,l.useImperativeHandle)(o,(()=>v({},e,{weather:n}))),null}));return r})()));